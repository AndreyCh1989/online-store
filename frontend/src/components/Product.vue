<template>
    <div id="product">
        <div class="container catalog-container">
            <aside class="left-aside">
                <div class="left-aside-collapse-button">
                    <p class="left-aside-collapse-button-text">Category</p>
                    <i class="fas fa-caret-down left-aside-collapse-button-caret-down"></i>
                </div>
                <ul class="left-aside-collapse-button-items">
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Accessories</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Bags</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Denim</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Hoodies
                        & Sweatshirts</a></li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Jackets
                        & Coats</a></li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Pants</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Polos</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Shirts</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Shoes</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Shorts</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Sweaters
                        & Knits</a></li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">T-Shirts</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Tanks</a>
                    </li>
                </ul>
                <div class="left-aside-collapse-button">
                    <p class="left-aside-collapse-button-text">Brand</p>
                    <i class="fas fa-caret-down left-aside-collapse-button-caret-down"></i>
                </div>
                <ul class="left-aside-collapse-button-items">
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Accessories</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Bags</a>
                    </li>
                </ul>
                <div class="left-aside-collapse-button">
                    <p class="left-aside-collapse-button-text">Designer</p>
                    <i class="fas fa-caret-down left-aside-collapse-button-caret-down"></i>
                </div>
                <ul class="left-aside-collapse-button-items">
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Accessories</a>
                    </li>
                    <li class="left-aside-collapse-button-item"><a href=""
                                                                   class="left-aside-collapse-button-link">Bags</a>
                    </li>
                </ul>
            </aside>
            <section class="catalog">
                <div class="catalog-options">
                    <div class="catalog-options-trends">
                        <p class="catalog-option-header">Trending now</p>
                        <ul class="trends">
                            <li class="trend"><a href="" class="trend-link">Bohemian</a>
                            </li>
                            <li class="trend"><a href="" class="trend-link">Floral</a>
                            </li>
                            <li class="trend"><a href="" class="trend-link">Lace</a>
                            </li>
                            <li class="trend"><a href="" class="trend-link">Floral</a>
                            </li>
                            <li class="trend"><a href="" class="trend-link">Lace</a>
                            </li>
                            <li class="trend"><a href="" class="trend-link">Bohemian</a>
                            </li>
                        </ul>
                    </div>
                    <div class="catalog-options-sizes">
                        <p class="catalog-option-header">Size</p>
                        <div class="size-checkboxes">
                            <div style="display: flex; flex-direction: row;">
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox1" name="size">
                                    <label for="checkbox1"
                                           class="size-checkbox-label">XXS</label>
                                </div>
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox2" name="size">
                                    <label for="checkbox2"
                                           class="size-checkbox-label">XS</label>
                                </div>
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox3" name="size">
                                    <label for="checkbox3"
                                           class="size-checkbox-label">S</label>
                                </div>
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox4" name="size">
                                    <label for="checkbox4"
                                           class="size-checkbox-label">M</label>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: row;">
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox5" name="size">
                                    <label for="checkbox5"
                                           class="size-checkbox-label">L</label>
                                </div>
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox6" name="size">
                                    <label for="checkbox6"
                                           class="size-checkbox-label">XL</label>
                                </div>
                                <div class="size-checkbox">
                                    <input type="checkbox" class="checkbox"
                                           id="checkbox7" name="size">
                                    <label for="checkbox7"
                                           class="size-checkbox-label">XXL</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="catalog-options-price">
                        <p class="catalog-option-header">Price</p>
                        <div class="price-range">
                            <input type="range" id="range" class="price-range"
                                   name="volume" min="0" max="11">
                            <div class="range-out">
                                <p class="range-out-text">$52</p>
                                <p class="range-out-text">$400</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="catalog-sorting">
                    <div class="catalog-sorting-item"
                         style="margin: 0 10px 0 9px">
                        <label
                            class="catalog-sorting-select-font catalog-sorting-select-label">Sort
                            By</label>
                        <select
                            class="catalog-sorting-select catalog-sorting-select-font"
                            id="sortBy">
                            <option value="1">Name</option>
                            <option value="2">Price</option>
                        </select>
                    </div>
                    <div class="catalog-sorting-item">
                        <label
                            class="catalog-sorting-select-font catalog-sorting-select-label">Show</label>
                        <select
                            class="catalog-sorting-select catalog-sorting-select-font"
                            style="width: 57px;" id="show">
                            <option value="1">09</option>
                            <option value="2">18</option>
                        </select>
                    </div>
                </div>

                <section class="featured-items catalog-items">
                    <div class="product-features">
                        <el-product v-for="product in products" :key="product.id" :product="product"></el-product>
                    </div>
                </section>

                <div class="catalog-bottom-controls">
                    <div class="catalog-bottom-controls-left-side">
                        <div class="catalog-pagination">
                            <a href=""
                               class="catalog-pagination-arrow-left fas fa-angle-left"></a>
                            <div class="catalog-pagination-items">
                                <a href="" class="catalog-pagination-item"
                                   style="color: #ef5b70;">1</a>
                                <a href=""
                                   class="catalog-pagination-item">2</a>
                                <a href=""
                                   class="catalog-pagination-item">3</a>
                                <a href=""
                                   class="catalog-pagination-item">4</a>
                                <a href=""
                                   class="catalog-pagination-item">5</a>
                                <div
                                    class="catalog-pagination-item-combination">
                                    <a href="" class="catalog-pagination-item">6</a>
                                    <p class="catalog-pagination-item"
                                       style="margin-top: 15px;">.....</p>
                                    <a href="" class="catalog-pagination-item">20</a>
                                </div>
                            </div>
                            <a href=""
                               class="catalog-pagination-arrow-right fas fa-angle-right"></a>
                        </div>
                    </div>
                    <a href=""
                       class="catalog-bottom-controls-right-side catalog-view-all">View
                        All</a>
                </div>
            </section>
        </div>

        <div class="bottom-offers">
            <div class="bottom-offers-container container">
                <div class="bottom-offer">
                    <div style="width: 49px;">
                        <img src="../assets/img/free_deliv.svg" alt="">
                    </div>
                    <div class="bottom-offer-desc">
                        <p class="desc-upper">Free Delivery</p>
                        <p class="desc-botom" style="margin-top: 0;"><span
                            style="letter-spacing: 0.35px;">Worldwide</span>
                            delivery on all. Authorit tively morph<br/>
                            next-generation innov tion with extensive models.
                        </p>
                    </div>
                </div>
                <div class="bottom-offer">
                    <div style="width: 49px;">
                        <img src="../assets/img/sales_disc.svg" alt="">
                    </div>
                    <div class="bottom-offer-desc">
                        <p class="desc-upper">Sales & discounts</p>
                        <p class="desc-botom" style="margin-top: 0;"><span
                            style="letter-spacing: 0.35px;">Worldwide</span>
                            delivery on all. Authorit tively morph<br/>
                            next-generation innov tion with extensive models.
                        </p>
                    </div>
                </div>
                <div class="bottom-offer">
                    <div style="width: 49px;">
                        <img src="../assets/img/qual_assur.svg" alt="">
                    </div>
                    <div class="bottom-offer-desc">
                        <p class="desc-upper">Quality assurance</p>
                        <p class="desc-botom" style="margin-top: 0;"><span
                            style="letter-spacing: 0.35px;">Worldwide</span>
                            delivery on all. Authorit tively morph<br/>
                            next-generation innov tion with extensive models.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import Product from './shared/Product'
import api from '../js/api'

export default {
  props: ['filter'],
  name: 'Product',
  data () {
    return {
      products: [],
      filterMutable: this.filter
    }
  },
  components: {
    'el-product': Product
  },
  methods: {
    async getProducts () {
      try {
        const data = await api.get(`/api/catalog?amount=9&filter=${this.filterMutable ? this.filterMutable : ''}`)
        this.products = data || ''
      } catch (e) {
        console.log(e)
      }
    },
    setFilter (newFilter) {
      this.filterMutable = newFilter
    }
  },
  watch: {
    async filterMutable () {
      await this.getProducts()
    }
  },
  async mounted () {
    await this.getProducts()

    $('.left-aside-collapse-button').click(function () {
     let el = $(this).next()
     if (el.is(':hidden')) {
        el.show()
        $(this).children('.fa-caret-down').toggleClass('fa-caret-down fa-caret-up')
        $(this).children('.left-aside-collapse-button-text').css('color', '#ef5b70')
     }
     else {
        el.hide()
        $(this).children('.fa-caret-up').toggleClass('fa-caret-up fa-caret-down')
        $(this).children('.left-aside-collapse-button-text').css('color', '#6f6e6e')
     }
    })
  }
}
</script>
